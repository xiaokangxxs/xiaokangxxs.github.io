{"title":"DataX安装及基本使用","slug":"DataX安装及基本使用","date":"2021-04-24T08:50:47.136Z","updated":"2021-04-24T08:53:20.559Z","comments":true,"path":"api/articles/DataX安装及基本使用.json","excerpt":null,"covers":["https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/datax_relation.png","https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/job.png","https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/stream2stream.png","https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/mysqlreader.png","https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/hdfswriter.png"],"content":"<h2 id=\"前置准备\"><a href=\"#前置准备\" class=\"headerlink\" title=\"前置准备\"></a>前置准备</h2><p>这里我们演示 MySQL 和 HDFS 之间的数据导入导出，需要预先安装 Hadoop集群。Hadoop 集群的安装教程如下：</p>\n<blockquote>\n<p><a href=\"https://mp.weixin.qq.com/s/WNS9Ho-UWesQifwk4FjxQQ\">Linux下jdk的安装</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/FNXjVGzIJlNDLbS6u0j6Pg\">Linux下Python的安装-视频教程</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/Ic1aumcFa8B-a-9kg5AscQ\">Hadoop单机伪分布式-视频教程</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/NLpvOiqr8tLDY4kA3EM7Zg\">Hadoop完全分布式集群环境搭建-视频教程</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/gmOmg6uKD2LjhZPf4eZXdA\">HA(高可用)-Hadoop集群环境搭建视频+图文教程</a></p>\n</blockquote>\n<h2 id=\"一、DataX-概述\"><a href=\"#一、DataX-概述\" class=\"headerlink\" title=\"一、DataX 概述\"></a>一、DataX 概述</h2><p>DataX 是一个异构数据源离线同步工具，致力于实现包括关系型数据库(MySQL、Oracle等)、HDFS、Hive、ODPS、HBase、FTP等各种异构数据源之间稳定高效的数据同步功能。 </p>\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/datax_relation.png\"/> </div>\n## 二、安装\n\n<h3 id=\"2-1-下载并解压\"><a href=\"#2-1-下载并解压\" class=\"headerlink\" title=\"2.1 下载并解压\"></a>2.1 下载并解压</h3><p>源码地址：<a href=\"https://github.com/alibaba/DataX\">https://github.com/alibaba/DataX</a> </p>\n<p>这里我下载的是最新版本的 DataX3.0 。下载地址为：<a href=\"http://datax-opensource.oss-cn-hangzhou.aliyuncs.com/datax.tar.gz\">http://datax-opensource.oss-cn-hangzhou.aliyuncs.com/datax.tar.gz </a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 下载后进行解压</span></span><br><span class=\"line\">[xiaokang@hadoop ~]$ tar -zxvf datax.tar.gz -C /opt/software/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-运行自检脚本\"><a href=\"#2-2-运行自检脚本\" class=\"headerlink\" title=\"2.2 运行自检脚本\"></a>2.2 运行自检脚本</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop ~]$ cd /opt/software/datax/</span><br><span class=\"line\">[xiaokang@hadoop datax]$ bin/datax.py job/job.json</span><br></pre></td></tr></table></figure>\n\n<p>出现以下界面说明DataX安装成功</p>\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/job.png\"/> </div>\n\n<h2 id=\"三、基本使用\"><a href=\"#三、基本使用\" class=\"headerlink\" title=\"三、基本使用\"></a>三、基本使用</h2><h3 id=\"3-1-从stream读取数据并打印到控制台\"><a href=\"#3-1-从stream读取数据并打印到控制台\" class=\"headerlink\" title=\"3.1 从stream读取数据并打印到控制台\"></a>3.1 从stream读取数据并打印到控制台</h3><h4 id=\"1-查看官方json配置模板\"><a href=\"#1-查看官方json配置模板\" class=\"headerlink\" title=\"1. 查看官方json配置模板\"></a>1. 查看官方json配置模板</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop ~]$ python /opt/software/datax/bin/datax.py -r streamreader -w streamwriter</span><br><span class=\"line\"></span><br><span class=\"line\">DataX (DATAX-OPENSOURCE-3.0), From Alibaba !</span><br><span class=\"line\">Copyright (C) 2010-2017, Alibaba Group. All Rights Reserved.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the streamreader document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/streamreader/doc/streamreader.md </span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the streamwriter document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/streamwriter/doc/streamwriter.md </span><br><span class=\"line\"> </span><br><span class=\"line\">Please save the following configuration as a json file and  use</span><br><span class=\"line\">     python &#123;DATAX_HOME&#125;/bin/datax.py &#123;JSON_FILE_NAME&#125;.json </span><br><span class=\"line\">to run the job.</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;job&quot;: &#123;</span><br><span class=\"line\">        &quot;content&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;reader&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;streamreader&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;sliceRecordCount&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                &quot;writer&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;streamwriter&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;encoding&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;print&quot;: true</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        &quot;setting&quot;: &#123;</span><br><span class=\"line\">            &quot;speed&quot;: &#123;</span><br><span class=\"line\">                &quot;channel&quot;: &quot;&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-根据模板编写json文件\"><a href=\"#2-根据模板编写json文件\" class=\"headerlink\" title=\"2. 根据模板编写json文件\"></a>2. 根据模板编写json文件</h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;job&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;content&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;reader&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;streamreader&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;string&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;value&quot;</span>:<span class=\"string\">&quot;xiaokang-微信公众号:小康新鲜事儿&quot;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;string&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;value&quot;</span>:<span class=\"string\">&quot;你好，世界-DataX&quot;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;sliceRecordCount&quot;</span>: <span class=\"string\">&quot;10&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                <span class=\"attr\">&quot;writer&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;streamwriter&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;encoding&quot;</span>: <span class=\"string\">&quot;utf-8&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;print&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        <span class=\"attr\">&quot;setting&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;speed&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;channel&quot;</span>: <span class=\"string\">&quot;2&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-运行Job\"><a href=\"#3-运行Job\" class=\"headerlink\" title=\"3. 运行Job\"></a>3. 运行Job</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ /opt/software/datax/bin/datax.py ./stream2stream.json</span><br></pre></td></tr></table></figure>\n\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/stream2stream.png\"/> </div>\n### 3.2 MySQL数据导入到HDFS\n\n<p>示例：导出 MySQL 数据库中的 <code>help_keyword</code> 表到 HDFS 的 <code>/datax </code>目录下(此目录必须提前创建)。</p>\n<blockquote>\n<p>注：help_keyword 是 MySQL 内置的一张字典表，之后的示例均使用这张表。</p>\n</blockquote>\n<h4 id=\"1-查看官方json配置模板-1\"><a href=\"#1-查看官方json配置模板-1\" class=\"headerlink\" title=\"1. 查看官方json配置模板\"></a>1. 查看官方json配置模板</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ python /opt/software/datax/bin/datax.py -r mysqlreader -w hdfswriter</span><br><span class=\"line\"></span><br><span class=\"line\">DataX (DATAX-OPENSOURCE-3.0), From Alibaba !</span><br><span class=\"line\">Copyright (C) 2010-2017, Alibaba Group. All Rights Reserved.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the mysqlreader document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/mysqlreader/doc/mysqlreader.md </span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the hdfswriter document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/hdfswriter/doc/hdfswriter.md </span><br><span class=\"line\"> </span><br><span class=\"line\">Please save the following configuration as a json file and  use</span><br><span class=\"line\">     python &#123;DATAX_HOME&#125;/bin/datax.py &#123;JSON_FILE_NAME&#125;.json </span><br><span class=\"line\">to run the job.</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;job&quot;: &#123;</span><br><span class=\"line\">        &quot;content&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;reader&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;mysqlreader&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;connection&quot;: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                &quot;jdbcUrl&quot;: [], </span><br><span class=\"line\">                                &quot;table&quot;: []</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        &quot;password&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;username&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;where&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                &quot;writer&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;hdfswriter&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;compress&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;defaultFS&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;fieldDelimiter&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;fileName&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;fileType&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;path&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;writeMode&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        &quot;setting&quot;: &#123;</span><br><span class=\"line\">            &quot;speed&quot;: &#123;</span><br><span class=\"line\">                &quot;channel&quot;: &quot;&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-根据模板编写json文件-1\"><a href=\"#2-根据模板编写json文件-1\" class=\"headerlink\" title=\"2. 根据模板编写json文件\"></a>2. 根据模板编写json文件</h4><p>mysqlreader参数解析： </p>\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/mysqlreader.png\"/> </div>\nhdfswriter参数解析： \n\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/hdfswriter.png\"/> </div>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;job&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;content&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;reader&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;mysqlreader&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;help_keyword_id&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;connection&quot;</span>: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                <span class=\"attr\">&quot;jdbcUrl&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"string\">&quot;jdbc:mysql://192.168.1.106:3306/mysql&quot;</span></span><br><span class=\"line\">                                ], </span><br><span class=\"line\">                                <span class=\"attr\">&quot;table&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"string\">&quot;help_keyword&quot;</span></span><br><span class=\"line\">                                ]</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;password&quot;</span>: <span class=\"string\">&quot;xiaokang&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                <span class=\"attr\">&quot;writer&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;hdfswriter&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t                        &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;name&quot;</span>:<span class=\"string\">&quot;help_keyword_id&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;int&quot;</span></span><br><span class=\"line\">\t                        &#125;,</span><br><span class=\"line\">\t                        &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;name&quot;</span>:<span class=\"string\">&quot;name&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;string&quot;</span></span><br><span class=\"line\">\t                        &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;defaultFS&quot;</span>: <span class=\"string\">&quot;hdfs://hadoop:9000&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fieldDelimiter&quot;</span>: <span class=\"string\">&quot;|&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fileName&quot;</span>: <span class=\"string\">&quot;keyword.txt&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fileType&quot;</span>: <span class=\"string\">&quot;text&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/datax&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;writeMode&quot;</span>: <span class=\"string\">&quot;append&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        <span class=\"attr\">&quot;setting&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;speed&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;channel&quot;</span>: <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-运行Job-1\"><a href=\"#3-运行Job-1\" class=\"headerlink\" title=\"3. 运行Job\"></a>3. 运行Job</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ /opt/software/datax/bin/datax.py ./mysql2hdfs.json</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-HDFS数据导出到MySQL\"><a href=\"#3-3-HDFS数据导出到MySQL\" class=\"headerlink\" title=\"3.3 HDFS数据导出到MySQL\"></a>3.3 HDFS数据导出到MySQL</h3><h4 id=\"1-将3-2中导入的文件重命名并在数据库创建表\"><a href=\"#1-将3-2中导入的文件重命名并在数据库创建表\" class=\"headerlink\" title=\"1. 将3.2中导入的文件重命名并在数据库创建表\"></a>1. 将3.2中导入的文件重命名并在数据库创建表</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop ~]$ hdfs dfs -mv /datax/keyword.txt__4c0e0d04_e503_437a_a1e3_49db49cbaaed /datax/keyword.txt</span><br></pre></td></tr></table></figure>\n\n<p>表必须预先创建，建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> help_keyword_from_hdfs_datax <span class=\"keyword\">LIKE</span> help_keyword;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-查看官方json配置模板\"><a href=\"#2-查看官方json配置模板\" class=\"headerlink\" title=\"2. 查看官方json配置模板\"></a>2. 查看官方json配置模板</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ python /opt/software/datax/bin/datax.py -r hdfsreader -w mysqlwriter</span><br><span class=\"line\"></span><br><span class=\"line\">DataX (DATAX-OPENSOURCE-3.0), From Alibaba !</span><br><span class=\"line\">Copyright (C) 2010-2017, Alibaba Group. All Rights Reserved.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the hdfsreader document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/hdfsreader/doc/hdfsreader.md </span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the mysqlwriter document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/mysqlwriter/doc/mysqlwriter.md </span><br><span class=\"line\"> </span><br><span class=\"line\">Please save the following configuration as a json file and  use</span><br><span class=\"line\">     python &#123;DATAX_HOME&#125;/bin/datax.py &#123;JSON_FILE_NAME&#125;.json </span><br><span class=\"line\">to run the job.</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;job&quot;: &#123;</span><br><span class=\"line\">        &quot;content&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;reader&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;hdfsreader&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;defaultFS&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;encoding&quot;: &quot;UTF-8&quot;, </span><br><span class=\"line\">                        &quot;fieldDelimiter&quot;: &quot;,&quot;, </span><br><span class=\"line\">                        &quot;fileType&quot;: &quot;orc&quot;, </span><br><span class=\"line\">                        &quot;path&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                &quot;writer&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;mysqlwriter&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;connection&quot;: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                &quot;jdbcUrl&quot;: &quot;&quot;, </span><br><span class=\"line\">                                &quot;table&quot;: []</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        &quot;password&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;preSql&quot;: [], </span><br><span class=\"line\">                        &quot;session&quot;: [], </span><br><span class=\"line\">                        &quot;username&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;writeMode&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        &quot;setting&quot;: &#123;</span><br><span class=\"line\">            &quot;speed&quot;: &#123;</span><br><span class=\"line\">                &quot;channel&quot;: &quot;&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-根据模板编写json文件\"><a href=\"#3-根据模板编写json文件\" class=\"headerlink\" title=\"3. 根据模板编写json文件\"></a>3. 根据模板编写json文件</h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;job&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;content&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;reader&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;hdfsreader&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;defaultFS&quot;</span>: <span class=\"string\">&quot;hdfs://hadoop:9000&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;encoding&quot;</span>: <span class=\"string\">&quot;UTF-8&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fieldDelimiter&quot;</span>: <span class=\"string\">&quot;|&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fileType&quot;</span>: <span class=\"string\">&quot;text&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/datax/keyword.txt&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                <span class=\"attr\">&quot;writer&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;mysqlwriter&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;help_keyword_id&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;connection&quot;</span>: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                <span class=\"attr\">&quot;jdbcUrl&quot;</span>: <span class=\"string\">&quot;jdbc:mysql://192.168.1.106:3306/mysql&quot;</span>, </span><br><span class=\"line\">                                <span class=\"attr\">&quot;table&quot;</span>: [<span class=\"string\">&quot;help_keyword_from_hdfs_datax&quot;</span>]</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;password&quot;</span>: <span class=\"string\">&quot;xiaokang&quot;</span>,  </span><br><span class=\"line\">                        <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;writeMode&quot;</span>: <span class=\"string\">&quot;insert&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        <span class=\"attr\">&quot;setting&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;speed&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;channel&quot;</span>: <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-运行Job-2\"><a href=\"#3-运行Job-2\" class=\"headerlink\" title=\"3. 运行Job\"></a>3. 运行Job</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ /opt/software/datax/bin/datax.py ./hdfs2mysql.json</span><br></pre></td></tr></table></figure>","more":"<h2 id=\"前置准备\"><a href=\"#前置准备\" class=\"headerlink\" title=\"前置准备\"></a>前置准备</h2><p>这里我们演示 MySQL 和 HDFS 之间的数据导入导出，需要预先安装 Hadoop集群。Hadoop 集群的安装教程如下：</p>\n<blockquote>\n<p><a href=\"https://mp.weixin.qq.com/s/WNS9Ho-UWesQifwk4FjxQQ\">Linux下jdk的安装</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/FNXjVGzIJlNDLbS6u0j6Pg\">Linux下Python的安装-视频教程</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/Ic1aumcFa8B-a-9kg5AscQ\">Hadoop单机伪分布式-视频教程</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/NLpvOiqr8tLDY4kA3EM7Zg\">Hadoop完全分布式集群环境搭建-视频教程</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/gmOmg6uKD2LjhZPf4eZXdA\">HA(高可用)-Hadoop集群环境搭建视频+图文教程</a></p>\n</blockquote>\n<h2 id=\"一、DataX-概述\"><a href=\"#一、DataX-概述\" class=\"headerlink\" title=\"一、DataX 概述\"></a>一、DataX 概述</h2><p>DataX 是一个异构数据源离线同步工具，致力于实现包括关系型数据库(MySQL、Oracle等)、HDFS、Hive、ODPS、HBase、FTP等各种异构数据源之间稳定高效的数据同步功能。 </p>\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/datax_relation.png\"/> </div>\n## 二、安装\n\n<h3 id=\"2-1-下载并解压\"><a href=\"#2-1-下载并解压\" class=\"headerlink\" title=\"2.1 下载并解压\"></a>2.1 下载并解压</h3><p>源码地址：<a href=\"https://github.com/alibaba/DataX\">https://github.com/alibaba/DataX</a> </p>\n<p>这里我下载的是最新版本的 DataX3.0 。下载地址为：<a href=\"http://datax-opensource.oss-cn-hangzhou.aliyuncs.com/datax.tar.gz\">http://datax-opensource.oss-cn-hangzhou.aliyuncs.com/datax.tar.gz </a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 下载后进行解压</span></span><br><span class=\"line\">[xiaokang@hadoop ~]$ tar -zxvf datax.tar.gz -C /opt/software/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-运行自检脚本\"><a href=\"#2-2-运行自检脚本\" class=\"headerlink\" title=\"2.2 运行自检脚本\"></a>2.2 运行自检脚本</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop ~]$ cd /opt/software/datax/</span><br><span class=\"line\">[xiaokang@hadoop datax]$ bin/datax.py job/job.json</span><br></pre></td></tr></table></figure>\n\n<p>出现以下界面说明DataX安装成功</p>\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/job.png\"/> </div>\n\n<h2 id=\"三、基本使用\"><a href=\"#三、基本使用\" class=\"headerlink\" title=\"三、基本使用\"></a>三、基本使用</h2><h3 id=\"3-1-从stream读取数据并打印到控制台\"><a href=\"#3-1-从stream读取数据并打印到控制台\" class=\"headerlink\" title=\"3.1 从stream读取数据并打印到控制台\"></a>3.1 从stream读取数据并打印到控制台</h3><h4 id=\"1-查看官方json配置模板\"><a href=\"#1-查看官方json配置模板\" class=\"headerlink\" title=\"1. 查看官方json配置模板\"></a>1. 查看官方json配置模板</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop ~]$ python /opt/software/datax/bin/datax.py -r streamreader -w streamwriter</span><br><span class=\"line\"></span><br><span class=\"line\">DataX (DATAX-OPENSOURCE-3.0), From Alibaba !</span><br><span class=\"line\">Copyright (C) 2010-2017, Alibaba Group. All Rights Reserved.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the streamreader document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/streamreader/doc/streamreader.md </span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the streamwriter document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/streamwriter/doc/streamwriter.md </span><br><span class=\"line\"> </span><br><span class=\"line\">Please save the following configuration as a json file and  use</span><br><span class=\"line\">     python &#123;DATAX_HOME&#125;/bin/datax.py &#123;JSON_FILE_NAME&#125;.json </span><br><span class=\"line\">to run the job.</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;job&quot;: &#123;</span><br><span class=\"line\">        &quot;content&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;reader&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;streamreader&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;sliceRecordCount&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                &quot;writer&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;streamwriter&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;encoding&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;print&quot;: true</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        &quot;setting&quot;: &#123;</span><br><span class=\"line\">            &quot;speed&quot;: &#123;</span><br><span class=\"line\">                &quot;channel&quot;: &quot;&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-根据模板编写json文件\"><a href=\"#2-根据模板编写json文件\" class=\"headerlink\" title=\"2. 根据模板编写json文件\"></a>2. 根据模板编写json文件</h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;job&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;content&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;reader&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;streamreader&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;string&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;value&quot;</span>:<span class=\"string\">&quot;xiaokang-微信公众号:小康新鲜事儿&quot;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;string&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;value&quot;</span>:<span class=\"string\">&quot;你好，世界-DataX&quot;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;sliceRecordCount&quot;</span>: <span class=\"string\">&quot;10&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                <span class=\"attr\">&quot;writer&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;streamwriter&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;encoding&quot;</span>: <span class=\"string\">&quot;utf-8&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;print&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        <span class=\"attr\">&quot;setting&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;speed&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;channel&quot;</span>: <span class=\"string\">&quot;2&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-运行Job\"><a href=\"#3-运行Job\" class=\"headerlink\" title=\"3. 运行Job\"></a>3. 运行Job</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ /opt/software/datax/bin/datax.py ./stream2stream.json</span><br></pre></td></tr></table></figure>\n\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/stream2stream.png\"/> </div>\n### 3.2 MySQL数据导入到HDFS\n\n<p>示例：导出 MySQL 数据库中的 <code>help_keyword</code> 表到 HDFS 的 <code>/datax </code>目录下(此目录必须提前创建)。</p>\n<blockquote>\n<p>注：help_keyword 是 MySQL 内置的一张字典表，之后的示例均使用这张表。</p>\n</blockquote>\n<h4 id=\"1-查看官方json配置模板-1\"><a href=\"#1-查看官方json配置模板-1\" class=\"headerlink\" title=\"1. 查看官方json配置模板\"></a>1. 查看官方json配置模板</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ python /opt/software/datax/bin/datax.py -r mysqlreader -w hdfswriter</span><br><span class=\"line\"></span><br><span class=\"line\">DataX (DATAX-OPENSOURCE-3.0), From Alibaba !</span><br><span class=\"line\">Copyright (C) 2010-2017, Alibaba Group. All Rights Reserved.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the mysqlreader document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/mysqlreader/doc/mysqlreader.md </span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the hdfswriter document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/hdfswriter/doc/hdfswriter.md </span><br><span class=\"line\"> </span><br><span class=\"line\">Please save the following configuration as a json file and  use</span><br><span class=\"line\">     python &#123;DATAX_HOME&#125;/bin/datax.py &#123;JSON_FILE_NAME&#125;.json </span><br><span class=\"line\">to run the job.</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;job&quot;: &#123;</span><br><span class=\"line\">        &quot;content&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;reader&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;mysqlreader&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;connection&quot;: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                &quot;jdbcUrl&quot;: [], </span><br><span class=\"line\">                                &quot;table&quot;: []</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        &quot;password&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;username&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;where&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                &quot;writer&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;hdfswriter&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;compress&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;defaultFS&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;fieldDelimiter&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;fileName&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;fileType&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;path&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;writeMode&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        &quot;setting&quot;: &#123;</span><br><span class=\"line\">            &quot;speed&quot;: &#123;</span><br><span class=\"line\">                &quot;channel&quot;: &quot;&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-根据模板编写json文件-1\"><a href=\"#2-根据模板编写json文件-1\" class=\"headerlink\" title=\"2. 根据模板编写json文件\"></a>2. 根据模板编写json文件</h4><p>mysqlreader参数解析： </p>\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/mysqlreader.png\"/> </div>\nhdfswriter参数解析： \n\n<div align=\"center\"> <img width=\"600px\" src=\"https://raw.githubusercontent.com/xiaokangxxs/notebook/master/docs/BigData/DataX/hdfswriter.png\"/> </div>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;job&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;content&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;reader&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;mysqlreader&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;help_keyword_id&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;connection&quot;</span>: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                <span class=\"attr\">&quot;jdbcUrl&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"string\">&quot;jdbc:mysql://192.168.1.106:3306/mysql&quot;</span></span><br><span class=\"line\">                                ], </span><br><span class=\"line\">                                <span class=\"attr\">&quot;table&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"string\">&quot;help_keyword&quot;</span></span><br><span class=\"line\">                                ]</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;password&quot;</span>: <span class=\"string\">&quot;xiaokang&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                <span class=\"attr\">&quot;writer&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;hdfswriter&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t                        &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;name&quot;</span>:<span class=\"string\">&quot;help_keyword_id&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;int&quot;</span></span><br><span class=\"line\">\t                        &#125;,</span><br><span class=\"line\">\t                        &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;name&quot;</span>:<span class=\"string\">&quot;name&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;string&quot;</span></span><br><span class=\"line\">\t                        &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;defaultFS&quot;</span>: <span class=\"string\">&quot;hdfs://hadoop:9000&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fieldDelimiter&quot;</span>: <span class=\"string\">&quot;|&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fileName&quot;</span>: <span class=\"string\">&quot;keyword.txt&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fileType&quot;</span>: <span class=\"string\">&quot;text&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/datax&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;writeMode&quot;</span>: <span class=\"string\">&quot;append&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        <span class=\"attr\">&quot;setting&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;speed&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;channel&quot;</span>: <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-运行Job-1\"><a href=\"#3-运行Job-1\" class=\"headerlink\" title=\"3. 运行Job\"></a>3. 运行Job</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ /opt/software/datax/bin/datax.py ./mysql2hdfs.json</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-HDFS数据导出到MySQL\"><a href=\"#3-3-HDFS数据导出到MySQL\" class=\"headerlink\" title=\"3.3 HDFS数据导出到MySQL\"></a>3.3 HDFS数据导出到MySQL</h3><h4 id=\"1-将3-2中导入的文件重命名并在数据库创建表\"><a href=\"#1-将3-2中导入的文件重命名并在数据库创建表\" class=\"headerlink\" title=\"1. 将3.2中导入的文件重命名并在数据库创建表\"></a>1. 将3.2中导入的文件重命名并在数据库创建表</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop ~]$ hdfs dfs -mv /datax/keyword.txt__4c0e0d04_e503_437a_a1e3_49db49cbaaed /datax/keyword.txt</span><br></pre></td></tr></table></figure>\n\n<p>表必须预先创建，建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> help_keyword_from_hdfs_datax <span class=\"keyword\">LIKE</span> help_keyword;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-查看官方json配置模板\"><a href=\"#2-查看官方json配置模板\" class=\"headerlink\" title=\"2. 查看官方json配置模板\"></a>2. 查看官方json配置模板</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ python /opt/software/datax/bin/datax.py -r hdfsreader -w mysqlwriter</span><br><span class=\"line\"></span><br><span class=\"line\">DataX (DATAX-OPENSOURCE-3.0), From Alibaba !</span><br><span class=\"line\">Copyright (C) 2010-2017, Alibaba Group. All Rights Reserved.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the hdfsreader document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/hdfsreader/doc/hdfsreader.md </span><br><span class=\"line\"></span><br><span class=\"line\">Please refer to the mysqlwriter document:</span><br><span class=\"line\">     https://github.com/alibaba/DataX/blob/master/mysqlwriter/doc/mysqlwriter.md </span><br><span class=\"line\"> </span><br><span class=\"line\">Please save the following configuration as a json file and  use</span><br><span class=\"line\">     python &#123;DATAX_HOME&#125;/bin/datax.py &#123;JSON_FILE_NAME&#125;.json </span><br><span class=\"line\">to run the job.</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;job&quot;: &#123;</span><br><span class=\"line\">        &quot;content&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;reader&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;hdfsreader&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;defaultFS&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;encoding&quot;: &quot;UTF-8&quot;, </span><br><span class=\"line\">                        &quot;fieldDelimiter&quot;: &quot;,&quot;, </span><br><span class=\"line\">                        &quot;fileType&quot;: &quot;orc&quot;, </span><br><span class=\"line\">                        &quot;path&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                &quot;writer&quot;: &#123;</span><br><span class=\"line\">                    &quot;name&quot;: &quot;mysqlwriter&quot;, </span><br><span class=\"line\">                    &quot;parameter&quot;: &#123;</span><br><span class=\"line\">                        &quot;column&quot;: [], </span><br><span class=\"line\">                        &quot;connection&quot;: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                &quot;jdbcUrl&quot;: &quot;&quot;, </span><br><span class=\"line\">                                &quot;table&quot;: []</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        &quot;password&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;preSql&quot;: [], </span><br><span class=\"line\">                        &quot;session&quot;: [], </span><br><span class=\"line\">                        &quot;username&quot;: &quot;&quot;, </span><br><span class=\"line\">                        &quot;writeMode&quot;: &quot;&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        &quot;setting&quot;: &#123;</span><br><span class=\"line\">            &quot;speed&quot;: &#123;</span><br><span class=\"line\">                &quot;channel&quot;: &quot;&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-根据模板编写json文件\"><a href=\"#3-根据模板编写json文件\" class=\"headerlink\" title=\"3. 根据模板编写json文件\"></a>3. 根据模板编写json文件</h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;job&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;content&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;reader&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;hdfsreader&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;defaultFS&quot;</span>: <span class=\"string\">&quot;hdfs://hadoop:9000&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;encoding&quot;</span>: <span class=\"string\">&quot;UTF-8&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fieldDelimiter&quot;</span>: <span class=\"string\">&quot;|&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;fileType&quot;</span>: <span class=\"string\">&quot;text&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;path&quot;</span>: <span class=\"string\">&quot;/datax/keyword.txt&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                <span class=\"attr\">&quot;writer&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;mysqlwriter&quot;</span>, </span><br><span class=\"line\">                    <span class=\"attr\">&quot;parameter&quot;</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">&quot;column&quot;</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;help_keyword_id&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;connection&quot;</span>: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                <span class=\"attr\">&quot;jdbcUrl&quot;</span>: <span class=\"string\">&quot;jdbc:mysql://192.168.1.106:3306/mysql&quot;</span>, </span><br><span class=\"line\">                                <span class=\"attr\">&quot;table&quot;</span>: [<span class=\"string\">&quot;help_keyword_from_hdfs_datax&quot;</span>]</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ], </span><br><span class=\"line\">                        <span class=\"attr\">&quot;password&quot;</span>: <span class=\"string\">&quot;xiaokang&quot;</span>,  </span><br><span class=\"line\">                        <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>, </span><br><span class=\"line\">                        <span class=\"attr\">&quot;writeMode&quot;</span>: <span class=\"string\">&quot;insert&quot;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ], </span><br><span class=\"line\">        <span class=\"attr\">&quot;setting&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;speed&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;channel&quot;</span>: <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-运行Job-2\"><a href=\"#3-运行Job-2\" class=\"headerlink\" title=\"3. 运行Job\"></a>3. 运行Job</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[xiaokang@hadoop json]$ /opt/software/datax/bin/datax.py ./hdfs2mysql.json</span><br></pre></td></tr></table></figure>","categories":[],"tags":[]}